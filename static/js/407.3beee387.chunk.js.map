{"version":3,"file":"static/js/407.3beee387.chunk.js","mappings":"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","sources":["components/DateComp/DateComp.jsx","webpack://finances-planner/./src/components/Section/Section.module.scss?893f","components/Section/Section.jsx","webpack://finances-planner/./src/pages/StatisticsPage/StatisticsPage.module.scss?0652","pages/StatisticsPage/StatisticsPage.jsx","redux/transactions/transactionsSelector.js"],"sourcesContent":["\nimport { useEffect, useState } from 'react';\nimport DatePicker from 'react-datepicker';\nimport 'react-datepicker/dist/react-datepicker.css';\nimport './DateComp.scss';\nimport Icon from 'components/Icon/Icon';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  getCategoriesStat,\n  getTransaction,\n} from 'redux/transactions/transactionsOperations';\nimport { useLocation } from 'react-router-dom';\nimport { selectorIsLoggedIn } from 'redux/auth/authSelectors';\nimport clsx from 'clsx';\nimport { getDynamicsByMonth } from 'redux/dynamics/dynamicsOperations';\n\nconst months = [\n  'January',\n  'February',\n  'March',\n  'April',\n  'May',\n  'June',\n  'July',\n  'August',\n  'September',\n  'October',\n  'November',\n  'December',\n];\n\nconst DateComp = () => {\n  const dispatch = useDispatch();\n  const [selectedDate, setSelectedDate] = useState(new Date());\n  const isLoggedIn = useSelector(selectorIsLoggedIn);\n  const location = useLocation();\n  const [isDirty, setIsDirty] = useState(false);\n\n  const isDynamicsPage = location.pathname.endsWith('dynamics');\n\n  useEffect(() => {\n    if (location.pathname.endsWith('transactions')) {\n      isLoggedIn && dispatch(getTransaction(changedDateForApi(selectedDate)));\n    }\n    if (location.pathname.endsWith('categories')) {\n      isLoggedIn &&\n        dispatch(getCategoriesStat(changedDateForApi(selectedDate)));\n    }\n    if (location.pathname.endsWith('dynamics')) {\n      isLoggedIn &&\n        dispatch(getDynamicsByMonth(changedDateForApi(selectedDate)));\n    }\n  }, [isLoggedIn, dispatch, location.pathname, selectedDate]);\n\n  const changedDateForPicker = newDate => {\n    const month = newDate.getMonth();\n    const year = newDate.getFullYear();\n    return `${months[month]}, ${year}`;\n  };\n\n  const changedDateForApi = newDate => {\n    const month = newDate.getMonth();\n    const year = newDate.getFullYear();\n    return { year, month: month + 1 };\n  };\n\n  const handleCloseCalendar = date => {\n    if (isDirty) {\n      return;\n    }\n    if (location.pathname.endsWith('transactions')) {\n      dispatch(getTransaction(changedDateForApi(date)));\n    }\n    if (location.pathname.endsWith('categories')) {\n      dispatch(getCategoriesStat(changedDateForApi(date)));\n    }\n    if (isDynamicsPage) {\n      dispatch(getDynamicsByMonth(changedDateForApi(date)));\n    }\n    setIsDirty(true);\n  };\n\n  const handleDateChange = (date) => {\n    setSelectedDate(date);\n    setIsDirty(true);\n  }\n\n  return (\n    <div\n      className={clsx('calendarWrap', isDynamicsPage && 'calendarDynamicsWrap')}\n    >\n      <DatePicker\n        selected={selectedDate}\n        onChange={date => handleDateChange(date)} // используем setSelectedDate, чтобы обновлять значение выбранной даты\n        value={changedDateForPicker(selectedDate)}\n        onCalendarClose={() => handleCloseCalendar(selectedDate)}\n        maxDate={new Date()}\n        dateFormat=\"MM/yyyy\"\n        showMonthYearPicker\n      />\n      <Icon\n        name={!isDynamicsPage ? 'icon-calendar' : 'icon-vector-down'}\n        width={'24'}\n        height={'24'}\n        className={'icon-calendar'}\n        secondaryClassName={'icon-claendar-dynamics'}\n      />\n    </div>\n  );\n};\n\nexport default DateComp;\n","// extracted by mini-css-extract-plugin\nexport default {\"vectorImg\":\"Section_vectorImg__zw3S9\"};","import s from './Section.module.scss';\n\nconst Section = ({ children }) => {\n  return <section className={s.vectorImg}>{children}</section>;\n};\n\nexport default Section;\n","// extracted by mini-css-extract-plugin\nexport default {\"statWrapp\":\"StatisticsPage_statWrapp__owdQz\",\"navWrapper\":\"StatisticsPage_navWrapper__o+Wo+\",\"navThumb\":\"StatisticsPage_navThumb__2sawr\",\"link\":\"StatisticsPage_link__zUktx\",\"active\":\"StatisticsPage_active__DfVns\",\"calendarWrapper\":\"StatisticsPage_calendarWrapper__+n5Db\"};","import Container from 'components/Container/Container';\nimport DateComp from 'components/DateComp/DateComp';\nimport { NavLink, Outlet } from 'react-router-dom';\nimport s from './StatisticsPage.module.scss';\nimport Section from 'components/Section/Section';\nimport Loader from 'components/Loader/Loader';\nimport { useSelector } from 'react-redux';\nimport { selectedIsLoading } from 'redux/transactions/transactionsSelector';\n\nconst StatisticsPage = () => {\n  const isLoading = useSelector(selectedIsLoading);\n  return (\n    <>\n      {isLoading && <Loader />}\n      <Section>\n        <Container>\n          <div className={s.statWrapp}>\n            <div className={s.navWrapper}>\n              <div>\n                <ul className={s.navThumb}>\n                  <li>\n                    <NavLink\n                      to=\"transactions\"\n                      end\n                      className={({ isActive }) =>\n                        isActive ? s.active : s.link\n                      }\n                    >\n                      Expenses\n                    </NavLink>\n                  </li>\n                  <li>\n                    <NavLink\n                      className={({ isActive }) =>\n                        isActive ? s.active : s.link\n                      }\n                      to=\"categories\"\n                    >\n                      Categories\n                    </NavLink>\n                  </li>\n                </ul>\n              </div>\n              <div className={s.calendarWrapper}>\n                <DateComp />\n              </div>\n            </div>\n              <Outlet />\n          </div>\n        </Container>\n      </Section>\n    </>\n  );\n};\n\nexport default StatisticsPage;\n","import { createSelector } from '@reduxjs/toolkit';\n\nexport const selectedTransactions = state => state.statistics.transactions;\nexport const selectedCategoriesStat = state => state.statistics.categoriesStat;\nexport const selectedIsLoading = state => state.statistics.isLoading;\nexport const selectedError = state => state.statistics.error;\n\nexport const selectedChengedCategoriesStat = createSelector(\n  [selectedCategoriesStat],\n  categoriesStat => {\n    const totalSpend = categoriesStat.reduce(\n      (acc, item) => acc + item.amount,\n      0\n    );\n    const updatedCategoriesStat = categoriesStat.map(category => {\n      return {\n        ...category,\n        percentage: ((category.amount / totalSpend) * 100).toFixed(1),\n      };\n    });\n    return updatedCategoriesStat;\n  }\n);\n"],"names":["months","dispatch","useDispatch","_useState","useState","Date","_useState2","_slicedToArray","selectedDate","setSelectedDate","isLoggedIn","useSelector","selectorIsLoggedIn","location","useLocation","_useState3","_useState4","isDirty","setIsDirty","isDynamicsPage","pathname","endsWith","useEffect","getTransaction","changedDateForApi","getCategoriesStat","getDynamicsByMonth","newDate","month","getMonth","year","getFullYear","_jsxs","className","clsx","children","_jsx","DatePicker","selected","onChange","date","handleDateChange","value","concat","changedDateForPicker","onCalendarClose","maxDate","dateFormat","showMonthYearPicker","Icon","name","width","height","secondaryClassName","_ref","s","isLoading","selectedIsLoading","_Fragment","Loader","Section","Container","NavLink","to","end","isActive","_ref2","DateComp","Outlet","selectedTransactions","state","statistics","transactions","selectedChengedCategoriesStat","createSelector","categoriesStat","totalSpend","reduce","acc","item","amount","map","category","_objectSpread","percentage","toFixed"],"sourceRoot":""}