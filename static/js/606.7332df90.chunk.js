"use strict";(self.webpackChunkfinances_planner=self.webpackChunkfinances_planner||[]).push([[606],{8277:(e,a,n)=>{n.d(a,{v:()=>l});var s=n(4635),t=n(3045),o=n(3501),c=n(579);const{Option:r}=s.c,l=e=>(0,c.jsxs)(r,{...e,children:[(0,c.jsx)(t.A,{name:e.data.value,width:18,height:18,secondaryClassName:o.A.categoryIcon}),e.data.label]})},3606:(e,a,n)=>{n.r(a),n.d(a,{default:()=>J});var s=n(6178),t=n.n(s),o=n(3045);const c="TransactionsItem_transactionItem__I4efX",r="TransactionsItem_commentWrapper__NOBZi",l="TransactionsItem_transactionThumb__8EK3s",i="TransactionsItem_thumb__siEpA",d="TransactionsItem_transactionDate__i0qAD",m="TransactionsItem_transactionComment__otRnm",_="TransactionsItem_transactionSum__heA7p",u="TransactionsItem_transactionCategory__udzxZ",h="TransactionsItem_buttonThumb__g1kfu",p="TransactionsItem_buttonItem__xDui1";var x=n(579);const v=e=>{let{openModal:a,id:n,sum:s,date:v,category:j,comment:b,handleRemoveTransaction:g}=e;return(0,x.jsxs)("li",{className:c,children:[(0,x.jsxs)("div",{className:l,children:[(0,x.jsxs)("div",{className:r,children:[(0,x.jsx)("p",{className:d,children:t()(v).format("MM.YYYY")}),(0,x.jsx)("p",{className:m,children:b})]}),(0,x.jsx)("div",{children:(0,x.jsxs)("p",{className:_,children:[s," \u20b4"]})})]}),(0,x.jsxs)("div",{className:i,children:[(0,x.jsx)("p",{className:u,children:j}),(0,x.jsxs)("div",{className:h,children:[(0,x.jsx)("button",{className:p,type:"button",onClick:()=>a({id:n,sum:s,date:v,category:j,comment:b}),children:(0,x.jsx)(o.A,{name:"icon-pencil",width:"22",height:"22",className:"icon-pencil"})}),(0,x.jsx)("button",{className:p,type:"button",onClick:()=>g(n,v),children:(0,x.jsx)(o.A,{name:"icon-trash",width:"24",height:"24",className:"icon-trash"})})]})]})]},n)},j="Transactions_transactionList__76l1J",b="Transactions_formWrapper__jwN96",g="Transactions_formLabel__k1ayP",N="Transactions_formInput__tc3pe",T="Transactions_buttonEdit__vYe-K",y="Transactions_buttonCloseModal__xCCdw",I="Transactions_noTransactionWrapper__wWn6x",A="Transactions_noTransactionText__ncH1P",C="Transactions_options__100NG",M="Transactions_overlayAddIncome__YfVME",w="Transactions_modalWrapper__BOCR6",f="Transactions_labelForSelector__RwlCT",S="Transactions_labelText__Vti7J",k="Transactions_flex__8v7Ld",E="Transactions_error__8eB8D";var D=n(7950),Y=n(6285),R=n(9456),q=n(3501),L=n(5043),W=n(5854),F=n(700),O=n(8277),P=n(3892),V=n(899),Z=n(8692);const z=document.querySelector("#modal-root"),B=e=>{let{closeModal:a,transactionData:n}=e;const{id:s,sum:t,comment:c,category:r,date:l}=n,[i,d]=(0,L.useState)(r),[m]=(0,L.useState)(t),[_]=(0,L.useState)(c),u=(0,R.d4)(W.pY),h=(0,R.wA)(),p=(0,L.useCallback)((e=>{"Escape"===e.code&&a()}),[a]);(0,L.useEffect)((()=>(window.addEventListener("keydown",p),()=>{window.removeEventListener("keydown",p)})),[p]),(0,L.useEffect)((()=>{h((0,Z.p7)())}),[h]);const v=u.map((e=>{let{name:a,title:n}=e;return{value:a,label:n}})),j=e=>{d(e.value)};return(0,D.createPortal)((0,x.jsx)("div",{className:M,onClick:e=>{e.target===e.currentTarget&&a()},children:(0,x.jsx)("div",{className:w,children:(0,x.jsx)(P.l1,{initialValues:{type:"expense",category:i,comment:_||"no comment",sum:Number(m)},validationSchema:V.object({category:V.string().required("Required"),comment:V.string().required("Required").min(4,"Must be 4 characters or more").max(80,"Must be 80 characters or less"),sum:V.number().required("Required")}),onSubmit:(e,n)=>{let{setSubmitting:t}=n;const o=new Date(l),c=o.getFullYear(),r=o.getMonth()+1;h((0,F.AF)({id:s,values:{...e,category:i},date:{year:c,month:r}})),a(),t(!1)},children:e=>{let{errors:n,touched:s,values:t}=e;return(0,x.jsxs)(P.lV,{className:b,children:[(0,x.jsxs)("label",{className:f,children:[(0,x.jsx)("p",{className:S,children:"Per category"}),(0,x.jsx)(Y.Ay,{onChange:j,value:i?v.find((e=>e.value===i)):"",isSearchable:!1,placeholder:i,className:"select-container",classNamePrefix:"select",options:v,name:"category",components:{Option:O.v}}),(0,x.jsx)("div",{className:C})]}),(0,x.jsxs)("div",{className:k,children:[(0,x.jsxs)("label",{className:g,style:{outline:""+(s.comment&&n.comment?"1px solid red":"none")},children:["Expense comment",(0,x.jsx)(P.D0,{className:N,type:"text",name:"comment",placeholder:"Enter comment"}),s.comment&&n.comment&&(0,x.jsx)("div",{className:E,children:n.comment})]}),(0,x.jsxs)("label",{className:g,style:{outline:""+(s.sum&&n.sum?"1px solid red":"none")},children:["Sum",(0,x.jsx)(P.D0,{className:N,type:"text",name:"sum",placeholder:"00.00"}),s.sum&&n.sum&&(0,x.jsx)("div",{className:E,children:n.sum})]}),(0,x.jsx)("div",{children:(0,x.jsx)("button",{className:T,type:"submit",children:"Edit"})}),(0,x.jsx)("button",{className:y,type:"button",onClick:()=>a(),children:(0,x.jsx)(o.A,{name:"icon-close",width:24,height:24,secondaryClassName:q.A.iconClose})})]})]})}})})}),z)};var H=n(8867);const J=()=>{const e=(0,R.d4)(H.$d),[a,n]=(0,L.useState)(null),s=(0,R.wA)(),t=e=>{n(e)},o=(e,a)=>{const n=new Date(a),t=n.getFullYear(),o=n.getMonth()+1;s((0,F.z8)({id:e,date:{year:t,month:o}}))};return(0,x.jsxs)(x.Fragment,{children:[0===(null===e||void 0===e?void 0:e.length)?(0,x.jsx)("div",{className:I,children:(0,x.jsx)("p",{className:A,children:"You have no transactions"})}):(0,x.jsx)("ul",{className:j,children:e&&e.map((e=>{let{_id:a,sum:n,comment:s,category:c,date:r}=e;return(0,x.jsx)(v,{openModal:t,id:a,sum:n,comment:s,category:c,date:r,handleRemoveTransaction:o},a)}))}),a&&(0,x.jsx)(B,{closeModal:()=>n(null),transactionData:a})]})}},5854:(e,a,n)=>{n.d(a,{MD:()=>s,ZU:()=>o,pY:()=>t});const s=e=>e.expenses.presaving,t=e=>e.expenses.category,o=e=>e.expenses.isLoading},8867:(e,a,n)=>{n.d(a,{$d:()=>t,cI:()=>c,gt:()=>o});var s=n(192);const t=e=>e.statistics.transactions,o=e=>e.statistics.isLoading,c=(0,s.Mz)([e=>e.statistics.categoriesStat],(e=>{const a=e.reduce(((e,a)=>e+a.amount),0);return e.map((e=>({...e,percentage:(e.amount/a*100).toFixed(1)})))}))},3501:(e,a,n)=>{n.d(a,{A:()=>s});const s={overlayAddIncome:"MoadlAddIncome_overlayAddIncome__1P5D8",modalWrapper:"MoadlAddIncome_modalWrapper__TwlUa",modalAddIncome:"MoadlAddIncome_modalAddIncome__Od7vw",modalInput:"MoadlAddIncome_modalInput__ZH85Z",btnContainer:"MoadlAddIncome_btnContainer__ELtRK",btnAdd:"MoadlAddIncome_btnAdd__dTtCU",btnClose:"MoadlAddIncome_btnClose__nIubc",btnSvg:"MoadlAddIncome_btnSvg__Q6jjo",iconClose:"MoadlAddIncome_iconClose__owHnM",categoryIcon:"MoadlAddIncome_categoryIcon__C4OJV"}}}]);
//# sourceMappingURL=606.7332df90.chunk.js.map