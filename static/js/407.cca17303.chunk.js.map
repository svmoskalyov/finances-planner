{"version":3,"file":"static/js/407.cca17303.chunk.js","mappings":"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","sources":["components/DateComp/DateComp.jsx","webpack://finances-planner/./src/components/Section/Section.module.scss?893f","components/Section/Section.jsx","webpack://finances-planner/./src/pages/StatisticsPage/StatisticsPage.module.scss?0652","pages/StatisticsPage/StatisticsPage.jsx","redux/transactions/transactionsSelector.js"],"sourcesContent":["\nimport { useEffect, useState } from 'react';\nimport DatePicker from 'react-datepicker';\nimport 'react-datepicker/dist/react-datepicker.css';\nimport './DateComp.scss';\nimport Icon from 'components/Icon/Icon';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  getCategoriesStat,\n  getTransaction,\n} from 'redux/transactions/transactionsOperations';\nimport { useLocation } from 'react-router-dom';\nimport { selectorIsLoggedIn } from 'redux/auth/authSelectors';\nimport clsx from 'clsx';\nimport { getDynamicsByMonth } from 'redux/dynamics/dynamicsOperations';\n\nconst months = [\n  'January',\n  'February',\n  'March',\n  'April',\n  'May',\n  'June',\n  'July',\n  'August',\n  'September',\n  'October',\n  'November',\n  'December',\n];\n\nconst DateComp = () => {\n  const dispatch = useDispatch();\n  const [selectedDate, setSelectedDate] = useState(new Date());\n  const isLoggedIn = useSelector(selectorIsLoggedIn);\n  const location = useLocation();\n\n  const isDynamicsPage = location.pathname.endsWith('dynamics');\n\n  useEffect(() => {\n    if (location.pathname.endsWith('transactions')) {\n      isLoggedIn && dispatch(getTransaction(changedDateForApi(selectedDate)));\n    }\n    if (location.pathname.endsWith('categories')) {\n      isLoggedIn &&\n        dispatch(getCategoriesStat(changedDateForApi(selectedDate)));\n    }\n    if (location.pathname.endsWith('dynamics')) {\n      isLoggedIn &&\n        dispatch(getDynamicsByMonth(changedDateForApi(selectedDate)));\n    }\n  }, [isLoggedIn, dispatch, location.pathname, selectedDate]);\n\n  const changedDateForPicker = newDate => {\n    const month = newDate.getMonth();\n    const year = newDate.getFullYear();\n    return `${months[month]}, ${year}`;\n  };\n\n  const changedDateForApi = newDate => {\n    const month = newDate.getMonth();\n    const year = newDate.getFullYear();\n    return { year, month: month + 1 };\n  };\n\n  const handleCloseCalendar = date => {\n    if (location.pathname.endsWith('transactions')) {\n      dispatch(getTransaction(changedDateForApi(date)));\n    }\n    if (location.pathname.endsWith('categories')) {\n      dispatch(getCategoriesStat(changedDateForApi(date)));\n    }\n    if (isDynamicsPage) {\n      dispatch(getDynamicsByMonth(changedDateForApi(date)));\n    }\n  };\n\n  return (\n    <div\n      className={clsx('calendarWrap', isDynamicsPage && 'calendarDynamicsWrap')}\n    >\n      <DatePicker\n        selected={selectedDate}\n        onChange={date => setSelectedDate(date)} // используем setSelectedDate, чтобы обновлять значение выбранной даты\n        value={changedDateForPicker(selectedDate)}\n        onCalendarClose={() => handleCloseCalendar(selectedDate)}\n        maxDate={new Date()}\n        dateFormat=\"MM/yyyy\"\n        showMonthYearPicker\n      />\n      <Icon\n        name={!isDynamicsPage ? 'icon-calendar' : 'icon-vector-down'}\n        width={'24'}\n        height={'24'}\n        className={'icon-calendar'}\n        secondaryClassName={'icon-claendar-dynamics'}\n      />\n    </div>\n  );\n};\n\nexport default DateComp;\n","// extracted by mini-css-extract-plugin\nexport default {\"vectorImg\":\"Section_vectorImg__zw3S9\"};","import s from './Section.module.scss';\n\nconst Section = ({ children }) => {\n  return <section className={s.vectorImg}>{children}</section>;\n};\n\nexport default Section;\n","// extracted by mini-css-extract-plugin\nexport default {\"statWrapp\":\"StatisticsPage_statWrapp__owdQz\",\"navWrapper\":\"StatisticsPage_navWrapper__o+Wo+\",\"navThumb\":\"StatisticsPage_navThumb__2sawr\",\"link\":\"StatisticsPage_link__zUktx\",\"active\":\"StatisticsPage_active__DfVns\",\"calendarWrapper\":\"StatisticsPage_calendarWrapper__+n5Db\"};","import Container from 'components/Container/Container';\nimport DateComp from 'components/DateComp/DateComp';\nimport { NavLink, Outlet } from 'react-router-dom';\nimport s from './StatisticsPage.module.scss';\nimport Section from 'components/Section/Section';\nimport Loader from 'components/Loader/Loader';\nimport { useSelector } from 'react-redux';\nimport { selectedIsLoading } from 'redux/transactions/transactionsSelector';\n\nconst StatisticsPage = () => {\n  const isLoading = useSelector(selectedIsLoading);\n  return (\n    <>\n      {isLoading && <Loader />}\n      <Section>\n        <Container>\n          <div className={s.statWrapp}>\n            <div className={s.navWrapper}>\n              <div>\n                <ul className={s.navThumb}>\n                  <li>\n                    <NavLink\n                      to=\"transactions\"\n                      end\n                      className={({ isActive }) =>\n                        isActive ? s.active : s.link\n                      }\n                    >\n                      Expenses\n                    </NavLink>\n                  </li>\n                  <li>\n                    <NavLink\n                      className={({ isActive }) =>\n                        isActive ? s.active : s.link\n                      }\n                      to=\"categories\"\n                    >\n                      Categories\n                    </NavLink>\n                  </li>\n                </ul>\n              </div>\n              <div className={s.calendarWrapper}>\n                <DateComp />\n              </div>\n            </div>\n              <Outlet />\n          </div>\n        </Container>\n      </Section>\n    </>\n  );\n};\n\nexport default StatisticsPage;\n","import { createSelector } from '@reduxjs/toolkit';\n\nexport const selectedTransactions = state => state.statistics.transactions;\nexport const selectedCategoriesStat = state => state.statistics.categoriesStat;\nexport const selectedIsLoading = state => state.statistics.isLoading;\nexport const selectedError = state => state.statistics.error;\n\nexport const selectedChengedCategoriesStat = createSelector(\n  [selectedCategoriesStat],\n  categoriesStat => {\n    const totalSpend = categoriesStat.reduce(\n      (acc, item) => acc + item.amount,\n      0\n    );\n    const updatedCategoriesStat = categoriesStat.map(category => {\n      return {\n        ...category,\n        percentage: ((category.amount / totalSpend) * 100).toFixed(1),\n      };\n    });\n    return updatedCategoriesStat;\n  }\n);\n"],"names":["months","dispatch","useDispatch","_useState","useState","Date","_useState2","_slicedToArray","selectedDate","setSelectedDate","isLoggedIn","useSelector","selectorIsLoggedIn","location","useLocation","isDynamicsPage","pathname","endsWith","useEffect","getTransaction","changedDateForApi","getCategoriesStat","getDynamicsByMonth","newDate","month","getMonth","year","getFullYear","_jsxs","className","clsx","children","_jsx","DatePicker","selected","onChange","date","value","concat","changedDateForPicker","onCalendarClose","maxDate","dateFormat","showMonthYearPicker","Icon","name","width","height","secondaryClassName","_ref","s","isLoading","selectedIsLoading","_Fragment","Loader","Section","Container","NavLink","to","end","isActive","_ref2","DateComp","Outlet","selectedTransactions","state","statistics","transactions","selectedChengedCategoriesStat","createSelector","categoriesStat","totalSpend","reduce","acc","item","amount","map","category","_objectSpread","percentage","toFixed"],"sourceRoot":""}